(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[6],{11:function(e,t,n){"use strict";n.r(t),n.d(t,"TOGGLE_DARK_MODE",(function(){return r})),n.d(t,"SEND_REGISTER_REQUEST",(function(){return a})),n.d(t,"REGISTER_SUCCESSFUL",(function(){return c})),n.d(t,"REGISTER_FAILED",(function(){return s})),n.d(t,"ERROR",(function(){return o})),n.d(t,"SUCCESS",(function(){return i})),n.d(t,"INFO",(function(){return u})),n.d(t,"CLEAR_ALERT",(function(){return l})),n.d(t,"GET_AUTH_DATA",(function(){return b})),n.d(t,"AUTHENTICATED",(function(){return O})),n.d(t,"NOT_AUTHENTICATED",(function(){return d})),n.d(t,"LOADING_ON",(function(){return j})),n.d(t,"LOADING_OFF",(function(){return E})),n.d(t,"LOGOUT",(function(){return p})),n.d(t,"FETCH_POST_SUCCESS",(function(){return m})),n.d(t,"FETCH_POST_FAILURE",(function(){return f})),n.d(t,"FETCH_USER_INFO_SUCCESS",(function(){return S})),n.d(t,"FETCH_USER_INFO_FAILURE",(function(){return _})),n.d(t,"CLEAR_ALL",(function(){return h})),n.d(t,"FETCH_A_POST_SUCCESS",(function(){return g})),n.d(t,"FETCH_A_POST_FAILURE",(function(){return T}));var r="TOGGLE_DARK_MODE",a="SEND_REGISTER_REQUEST",c="REGISTER_SUCCESSFUL",s="REGISTER_FAILED",o="ERROR",i="SUCCESS",u="INFO",l="CLEAR_ALERT",b="GET_AUTH_DATA",O="AUTHENTICATED",d="NOT_AUTHENTICATED",j="LOADING_ON",E="LOADING_OFF",p="LOGOUT",m="FETCH_POST_SUCCESS",f="FETCH_POST_FAILURE",S="FETCH_USER_INFO_SUCCESS",_="FETCH_USER_INFO_FAILURE",h="CLEAR_ALL",g="FETCH_A_POST_SUCCESS",T="FETCH_A_POST_FAILURE"},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),s=n.n(c),o=(n(91),n(21)),i=(n(92),n(23)),u=n(19),l=(n(93),n(47)),b=n(14),O=n(50),d=n(44),j=n.n(d),E=n(24),p=n.n(E),m=n(1),f=m.useState,S=m.useEffect,_=n(11),h=_.TOGGLE_DARK_MODE,g=_.LOGOUT,T=_.SUCCESS,C=_.ERROR,v=_.CLEAR_ALL,L=function(e){return{type:h,payload:e}},A=n(53),R=n(28),x=n(4);function I(){var e=function(){var e=Object(b.b)(),t=f((function(){return"true"===localStorage.getItem("dark")||!1})),n=Object(o.a)(t,2),r=n[0],a=n[1];return S((function(){localStorage.setItem("dark",r),e(L(r))}),[r]),[r,function(){a(!r)}]}(),t=Object(o.a)(e,2),n=(t[0],t[1]),a=Object(b.b)(),c=Object(b.c)((function(e){return e.common})),s=c.dark,d=c.isUserLoggedIn,E=Object(r.useState)(!1),m=Object(o.a)(E,2),_=m[0],h=m[1],I=Object(r.useState)(""),U=Object(o.a)(I,2),N=U[0],y=U[1],F=function(){if(window.innerWidth>576)return h(!0);h(!1)};return Object(r.useEffect)((function(){return window.innerWidth>576&&h(!0),window.addEventListener("resize",F),function(){window.removeEventListener("resize",null)}}),[]),Object(R.useQuery)("userData",(function(){return p.a.get("/user/fetchUserInfo")}),{onSuccess:function(e){var t=e.data;return y(t.details.name)},enabled:Boolean(d)}),Object(x.jsx)("div",{className:Object(i.a)("navbar px-1 px-md-4 py-2",s?"navbar_dark":"navbar_light"),children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(u.b,{to:"/",className:"navbar-brand",children:"Blog"}),Object(x.jsx)("button",{className:"menu-btn btn d-sm-none",onClick:function(){return h(!_)},children:Object(x.jsx)(A.b,{className:"menu-btn-icon"})}),_&&Object(x.jsxs)("ul",{className:Object(i.a)("navbar-nav  flex-row align-items-center",_&&"expanded"),children:[d?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:"nav-item me-3",children:Object(x.jsx)(u.b,{to:"/create-post",className:"cta nav-link btn btn-primary px-2",children:"Create post"})}),Object(x.jsx)("li",{className:"nav-item me-3",children:Object(x.jsxs)(u.b,{to:"/profile",className:"nav-link p-2 profile-link",children:[Object(x.jsx)("img",{src:"https://avatars.dicebear.com/api/male/john.svg?mood[]=happy",alt:""}),Object(x.jsx)("span",{children:N?N.split(" ")[0]:"Loading"})]})}),Object(x.jsx)("li",{className:"nav-item me-3",role:"button",onClick:function(){return a(function(){var e=Object(O.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/user/logout");case 3:n=e.sent,r=n.data,e.t0=r.success,e.next=!0===e.t0?8:!1===e.t0?13:17;break;case 8:return sessionStorage.removeItem("isUserLoggedIn"),t({type:g}),t({type:v}),t({type:T,payload:r.message}),e.abrupt("break",18);case 13:return sessionStorage.removeItem("isUserLoggedIn"),t({type:C,payload:r.message}),t({type:g}),e.abrupt("break",18);case 17:return e.abrupt("return");case 18:e.next=25;break;case 20:e.prev=20,e.t1=e.catch(0),sessionStorage.removeItem("isUserLoggedIn"),t({type:C,message:"Something went wrong!"}),t({type:g});case 25:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}())},children:Object(x.jsx)("button",{className:"nav-link btn btn-link  px-2",children:"Logout"})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:"nav-item me-3",children:Object(x.jsx)(u.b,{to:"/login",className:"nav-link btn btn-link px-2",children:"Login"})}),Object(x.jsx)("li",{className:"nav-item me-3",children:Object(x.jsx)(u.b,{to:"/register",className:"cta nav-link btn btn-primary  px-2",children:"Register"})})]}),Object(x.jsx)("li",{className:"nav-item  dark-mode-switch",onClick:n,children:s?Object(x.jsx)(l.b,{className:"icon"}):Object(x.jsx)(l.a,{className:"icon"})})]})]})})}var U=n(5),N=n(76),y=n(8),F=["component"];function k(e){var t=e.component,n=Object(N.a)(e,F),r="true"===sessionStorage.getItem("isUserLoggedIn");return Object(x.jsx)(y.b,Object(U.a)(Object(U.a)({},n),{},{render:function(e){return r?Object(x.jsx)(t,Object(U.a)({},e)):Object(x.jsx)(y.a,{to:"/login"})}}))}n(119);var D=n(27),G=n(11),H=n(52),P=n.n(H),w=n(49),z=n(71),M=a.a.lazy((function(){return n.e(21).then(n.bind(null,393))})),B=a.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(13)]).then(n.bind(null,176))})),Q=a.a.lazy((function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,397))})),K=a.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,399))})),W=a.a.lazy((function(){return Promise.all([n.e(2),n.e(0),n.e(3),n.e(9),n.e(10)]).then(n.bind(null,394))})),J=a.a.lazy((function(){return Promise.all([n.e(2),n.e(1),n.e(3),n.e(14)]).then(n.bind(null,395))}));var q=function(){var e=Object(D.d)(),t=Object(b.b)(),n=Object(b.c)((function(e){return e.common})).dark,a=Object(b.c)((function(e){return e.alert})),c=a.type,s=a.message,l=function(){t({type:G.CLEAR_ALERT})},O=Object(r.useState)((function(){return"true"===sessionStorage.getItem("isUserLoggedIn")||Boolean(Number(P.a.get("isUserLoggedIn")))})),d=Object(o.a)(O,1)[0];return Object(r.useEffect)((function(){return d?(sessionStorage.setItem("isUserLoggedIn",!0),t({type:G.AUTHENTICATED})):(sessionStorage.removeItem("isUserLoggedIn"),t({type:G.NOT_AUTHENTICATED}))}),[d]),Object(r.useEffect)((function(){switch(c){case G.SUCCESS:e.success(s,{onClose:l});break;case G.ERROR:e.error(s,{onClose:l});break;case G.INFO:e.info(s,{onClose:l})}}),[c,s]),Object(x.jsx)(u.a,{basename:"/",children:Object(x.jsxs)("div",{className:Object(i.a)("app",n?"app_dark":"app_light"),children:[Object(x.jsx)(I,{}),Object(x.jsx)(r.Suspense,{fallback:Object(x.jsx)(w.a,{}),children:Object(x.jsxs)(y.d,{children:[Object(x.jsx)(y.b,{path:"/",exact:!0,component:M}),Object(x.jsx)(y.b,{path:"/post/:id",component:B}),Object(x.jsx)(y.b,{path:"/register",component:Q}),Object(x.jsx)(y.b,{path:"/login",component:K}),Object(x.jsx)(k,{path:"/create-post",component:W}),Object(x.jsx)(k,{path:"/profile",component:J}),Object(x.jsx)(y.b,{path:"*",component:z.default})]})})]})})},V=n(26),X=n(78),Y=n(77),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:null,message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.ERROR:return Object(U.a)(Object(U.a)({},e),{},{type:G.ERROR,message:t.payload});case G.INFO:return Object(U.a)(Object(U.a)({},e),{},{type:G.INFO,message:t.payload});case G.SUCCESS:return Object(U.a)(Object(U.a)({},e),{},{type:G.SUCCESS,message:t.payload});case G.CLEAR_ALERT:return{type:null,message:null};default:return e}},$=n(11),ee=$.TOGGLE_DARK_MODE,te=$.AUTHENTICATED,ne=$.NOT_AUTHENTICATED,re=$.LOADING_ON,ae=$.LOADING_OFF,ce=$.LOGOUT,se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dark:!1,isUserLoggedIn:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(U.a)(Object(U.a)({},e),{},{dark:t.payload});case re:return Object(U.a)(Object(U.a)({},e),{},{loading:!0});case ae:return Object(U.a)(Object(U.a)({},e),{},{loading:!1});case te:return Object(U.a)(Object(U.a)({},e),{},{isUserLoggedIn:!0});case ne:case ce:return Object(U.a)(Object(U.a)({},e),{},{isUserLoggedIn:!1});default:return e}},oe=n(45),ie=n(11),ue=ie.FETCH_POST_SUCCESS,le=ie.FETCH_POST_FAILURE,be=ie.CLEAR_ALL,Oe=ie.FETCH_A_POST_SUCCESS,de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetchedPosts:[],userPosts:[],visitedPosts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{fetchedPosts:[],profilePosts:[],userPosts:[],visitedPosts:[]};case ue:return Object(U.a)(Object(U.a)({},e),{},{fetchedPosts:Object(oe.a)(t.payload)});case le:return e;case Oe:return Object(U.a)(Object(U.a)({},e),{},{visitedPosts:[].concat(Object(oe.a)(e.visitedPosts),[t.payload])});default:return e}},je=n(11),Ee=je.FETCH_USER_INFO_SUCCESS,pe=(je.FETCH_USER_INFO_FAILURE,je.CLEAR_ALL),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return{};case Ee:return Object(U.a)(Object(U.a)({},e),{},{user:t.payload});default:return e}},fe=Object(V.combineReducers)({common:se,alert:Z,post:de,user:me}),Se=[X.a],_e=Object(V.createStore)(fe,Object(Y.composeWithDevTools)(V.applyMiddleware.apply(void 0,Se))),he=n(79);p.a.defaults.baseURL="https://abhishekram404-blog-simple.herokuapp.com/api/",p.a.defaults.withCredentials=!0;var ge=new R.QueryClient;s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(R.QueryClientProvider,{client:ge,children:Object(x.jsx)(b.a,{store:_e,children:Object(x.jsx)(D.a,{transition:D.c.FADE,position:D.b.BOTTOM_LEFT,template:he.a,timeout:5e3,offset:"30px",children:Object(x.jsx)(q,{})})})})}),document.getElementById("root"))},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23),a=(n(1),n(14)),c=(n(120),n(4));function s(){var e=Object(a.c)((function(e){return e.common})).dark;return Object(c.jsx)("div",{className:Object(r.a)("loader",e?"loader-dark":"loader-light")})}},71:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));n(1);var r=n(8),a=n(4);function c(){var e=Object(r.g)();return Object(a.jsx)("div",{className:"error-page",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h1",{children:"Error 404 !"}),Object(a.jsx)("h4",{children:"The page that you requested was not found. "}),Object(a.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(){return e.goBack()},children:"Go to previous page"})]})})}},91:function(e,t,n){},93:function(e,t,n){}},[[121,7,8]]]);
//# sourceMappingURL=main.98b6aa8f.chunk.js.map