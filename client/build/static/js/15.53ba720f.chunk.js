(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[15],{298:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(33),s=n(23),c=n(21),r=n(29),o=n.n(r),i=n(1),l=n.n(i),u=n(15),b=(n(298),n(300)),d=n(342),j=n(11),p=n(120),h=n(299),m=n(119),O=n(118),x=n(34),v=n(121),g=n(18),y=n.n(g),f=n(8),N=n(5),w=n(2),F=l.a.lazy((function(){return n.e(22).then(n.t.bind(null,320,7))})),S=l.a.lazy((function(){return Promise.all([n.e(3),n.e(4),n.e(13)]).then(n.bind(null,139))}));t.default=Object(N.k)((function(){var e=Object(j.b)(),t=Object(N.g)(),n=Object(j.c)((function(e){return e.common})).dark,r=Object(j.c)((function(e){return e.user})).user,l=Object(i.useState)([]),g=Object(c.a)(l,2),k=g[0],C=g[1],R=Object(i.useState)(!1),P=Object(c.a)(R,2),E=P[0],I=P[1],T=Object(i.useState)({title:"",category:"Undefined",tags:[],content:""}),U=Object(c.a)(T,2),B=U[0],_=U[1],D=v.c({title:v.e().required("Post title is required."),category:v.e(),tags:v.a(),content:v.e()}),M=188,q=[10,13],A=[].concat(Object(s.a)(q),[M]),z=function(e){(e=Object(d.a)(e.text))&&(k.some((function(t){return t.text===e}))||C([].concat(Object(s.a)(k),[{id:e,text:e}])))},J=function(e){C((function(){return k.filter((function(t,n){return e!==n}))}))},V=Object(i.useCallback)(Object(h.debounce)((function(e){_(Object.assign(B,{content:e}))}),300),[]),W=function(e){var t=[];k.forEach((function(e){t.push(e.id)})),_(Object.assign(B,{title:e.title,category:e.category},{tags:t},{authorId:r._id,authorName:r.name,authorUsername:r.username}))},Y=function(){var n=Object(a.a)(o.a.mark((function n(a,s){var c,r,i,l,u,b;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,W(a);case 3:return n.next=5,y.a.post("/post/create-post?submitType=publish",B);case 5:return c=n.sent,r=c.data,n.next=9,r;case 9:i=n.sent,l=i.success,u=i.message,n.t0=l,n.next=!0===n.t0?15:!1===n.t0?20:21;break;case 15:return s.resetForm(),_({title:"",category:"",tags:[],content:""}),e({type:f.SUCCESS,payload:u}),t.push("/"),n.abrupt("return");case 20:return n.abrupt("return",e({type:f.ERROR,payload:u}));case 21:return n.abrupt("return",e({type:f.INFO,payload:u}));case 22:n.next=27;break;case 24:return n.prev=24,n.t1=n.catch(0),n.abrupt("return",e({type:f.ERROR,payload:null===n.t1||void 0===n.t1||null===(b=n.t1.response)||void 0===b?void 0:b.data.message}));case 27:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(e,t){return n.apply(this,arguments)}}(),H=function(){var n=Object(a.a)(o.a.mark((function n(a){var s,c,r,i,l,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,W(a.values);case 3:return n.next=5,y.a.post("/post/create-post?submitType=draft",B);case 5:return s=n.sent,c=s.data,n.next=9,c;case 9:r=n.sent,i=r.success,l=r.message,n.t0=i,n.next=!0===n.t0?15:!1===n.t0?20:21;break;case 15:return a.resetForm(),_({title:"",category:"",tags:[],content:""}),e({type:f.SUCCESS,payload:l}),t.push("/"),n.abrupt("return");case 20:return n.abrupt("return",e({type:f.ERROR,payload:l}));case 21:return n.abrupt("return",e({type:f.INFO,payload:l}));case 22:n.next=27;break;case 24:return n.prev=24,n.t1=n.catch(0),n.abrupt("return",e({type:f.ERROR,payload:null===n.t1||void 0===n.t1||null===(u=n.t1.response)||void 0===u?void 0:u.data.message}));case 27:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(e){return n.apply(this,arguments)}}();return Object(w.jsx)("div",{className:Object(u.a)("create_post py-4 p-2 p-sm-4",n?"create_post_dark":"create_post_light"),children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("div",{className:"row mb-2 align-items-center",children:[Object(w.jsx)("div",{className:"col-8 col-sm-9",children:Object(w.jsx)("h2",{children:E?"Preview mode":"Create a post"})}),Object(w.jsx)("div",{className:"col-4 col-sm-3 preview-btn ",children:Object(w.jsx)("button",{className:"btn btn-sm  ms-auto shadow-none",onClick:function(){return I(!E)},children:E?Object(w.jsxs)(w.Fragment,{children:["Edit ",Object(w.jsx)(O.a,{})]}):Object(w.jsxs)(w.Fragment,{children:[" ","Preview ",Object(w.jsx)(m.a,{})]})})})]}),E?Object(w.jsx)(i.Suspense,{fallback:Object(w.jsx)(x.a,{}),children:Object(w.jsx)(S,{title:B.title,category:B.category,body:B.content,preview:!0})}):Object(w.jsx)(p.d,{initialValues:B,onSubmit:Y,validationSchema:D,children:function(e){return Object(w.jsxs)(p.c,{className:"p-3",onBlur:function(){return W(e.values)},children:[Object(w.jsxs)("div",{className:"mb-3",children:[Object(w.jsx)(p.b,{as:"textarea",onKeyDown:function(e){parseInt(e.target.style.height)>=300||(e.target.style.height="inherit",e.target.style.height="".concat(e.target.scrollHeight,"px"))},name:"title",className:"form-control shadow-none post-title",placeholder:"New post title here"}),Object(w.jsx)("small",{className:"text-danger",children:Object(w.jsx)(p.a,{name:"title"})})]}),Object(w.jsxs)("div",{className:"mb-3 tags-cont",children:[Object(w.jsx)("label",{htmlFor:"post-tags",className:"form-label",children:"Tags"}),Object(w.jsx)(b.WithContext,{tags:k,autofocus:!1,handleAddition:z,handleDelete:J,delimiters:A,inputFieldPosition:"inline",allowUnique:!1,classNames:{tags:"tags",tag:"tag",tagInput:"tagInput",tagInputField:"tagInputField",remove:"tagRemoveBtn"}})]}),Object(w.jsxs)("div",{className:"mb-3 category-cont",children:[Object(w.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),Object(w.jsxs)(p.b,{as:"select",name:"category",id:"category",className:"form-control shadow-none",children:[Object(w.jsx)("option",{value:"Undefined",children:"Undefined"}),Object(w.jsx)("option",{value:"Crime",children:"Crime"}),Object(w.jsx)("option",{value:"Food",children:"Food"}),Object(w.jsx)("option",{value:"Travel",children:"Travel"}),Object(w.jsx)("option",{value:"Fashion",children:"Fashion"}),Object(w.jsx)("option",{value:"DIY",children:"DIY"}),Object(w.jsx)("option",{value:"Music",children:"Music"}),Object(w.jsx)("option",{value:"Sports",children:"Sports"}),Object(w.jsx)("option",{value:"E-sports",children:"E-sports"}),Object(w.jsx)("option",{value:"Fitness",children:"Fitness"}),Object(w.jsx)("option",{value:"Business",children:"Business"}),Object(w.jsx)("option",{value:"Politics",children:"Politics"}),Object(w.jsx)("option",{value:"Movie",children:"Movie"}),Object(w.jsx)("option",{value:"Science",children:"Science"}),Object(w.jsx)("option",{value:"Technology",children:"Technology"}),Object(w.jsx)("option",{value:"News",children:"News"})]})]}),Object(w.jsxs)("div",{className:"editor-cont mb-3",children:[Object(w.jsx)("label",{htmlFor:"post-body",className:"form-label",children:"Body"}),Object(w.jsx)(i.Suspense,{fallback:Object(w.jsx)(x.a,{}),children:Object(w.jsx)(F,{content:B.content,activeClass:"editor",events:{change:function(e){return V(e.editor.getData())}},config:{removeButtons:"Cut,Copy,Paste,Anchor,Scayt,PasteText,PasteFromWord,About"}})})]}),Object(w.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(w.jsx)("button",{className:"btn btn-secondary shadow-none me-3",onClick:function(){H(e)},type:"button",children:"Save draft"}),Object(w.jsx)("button",{type:"submit",className:"btn btn-primary  shadow-none",disabled:!e.isValid,children:"Post"})]})]})}})]})})}))}}]);
//# sourceMappingURL=15.53ba720f.chunk.js.map