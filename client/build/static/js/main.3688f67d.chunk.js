(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[5],{11:function(e,t,n){"use strict";n.r(t),n.d(t,"TOGGLE_DARK_MODE",(function(){return c})),n.d(t,"SEND_REGISTER_REQUEST",(function(){return r})),n.d(t,"REGISTER_SUCCESSFUL",(function(){return a})),n.d(t,"REGISTER_FAILED",(function(){return s})),n.d(t,"ERROR",(function(){return o})),n.d(t,"SUCCESS",(function(){return i})),n.d(t,"INFO",(function(){return u})),n.d(t,"CLEAR_ALERT",(function(){return l})),n.d(t,"GET_AUTH_DATA",(function(){return O})),n.d(t,"AUTHENTICATED",(function(){return b})),n.d(t,"NOT_AUTHENTICATED",(function(){return d})),n.d(t,"LOADING_ON",(function(){return j})),n.d(t,"LOADING_OFF",(function(){return E})),n.d(t,"LOGOUT",(function(){return p})),n.d(t,"FETCH_POST_SUCCESS",(function(){return _})),n.d(t,"FETCH_POST_FAILURE",(function(){return f})),n.d(t,"FETCH_USER_INFO_SUCCESS",(function(){return m})),n.d(t,"FETCH_USER_INFO_FAILURE",(function(){return S})),n.d(t,"CLEAR_ALL",(function(){return T})),n.d(t,"FETCH_A_POST_SUCCESS",(function(){return h})),n.d(t,"FETCH_A_POST_FAILURE",(function(){return C}));var c="TOGGLE_DARK_MODE",r="SEND_REGISTER_REQUEST",a="REGISTER_SUCCESSFUL",s="REGISTER_FAILED",o="ERROR",i="SUCCESS",u="INFO",l="CLEAR_ALERT",O="GET_AUTH_DATA",b="AUTHENTICATED",d="NOT_AUTHENTICATED",j="LOADING_ON",E="LOADING_OFF",p="LOGOUT",_="FETCH_POST_SUCCESS",f="FETCH_POST_FAILURE",m="FETCH_USER_INFO_SUCCESS",S="FETCH_USER_INFO_FAILURE",T="CLEAR_ALL",h="FETCH_A_POST_SUCCESS",C="FETCH_A_POST_FAILURE"},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(16),s=n.n(a),o=(n(91),n(28)),i=(n(92),n(22)),u=n(19),l=(n(93),n(47)),O=n(14),b=n(50),d=n(45),j=n.n(d),E=n(23),p=n.n(E),_=n(11),f=_.TOGGLE_DARK_MODE,m=_.LOGOUT,S=_.SUCCESS,T=_.ERROR,h=_.CLEAR_ALL,C=n(53),R=n(27),v=n(4);function A(){var e=Object(O.b)(),t=Object(O.c)((function(e){return e.common})),n=t.dark,r=t.isUserLoggedIn,a=Object(c.useState)(!1),s=Object(o.a)(a,2),d=s[0],E=s[1],_=Object(c.useState)(""),A=Object(o.a)(_,2),x=A[0],L=A[1],g=function(){if(window.innerWidth>576)return E(!0);E(!1)};Object(c.useEffect)((function(){return window.innerWidth>576&&E(!0),window.addEventListener("resize",g),function(){window.removeEventListener("resize",null)}}),[]);Object(R.useQuery)("userData",(function(){return p.a.get("/user/fetchUserInfo")}),{onSuccess:function(e){var t=e.data;return L(t.details.name)},enabled:Boolean(r)});return Object(v.jsx)("div",{className:Object(i.a)("navbar px-1 px-md-4 py-2",n?"navbar_dark":"navbar_light"),children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(u.b,{to:"/",className:"navbar-brand",children:"Blog"}),Object(v.jsx)("button",{className:"menu-btn btn d-sm-none",onClick:function(){return E(!d)},children:Object(v.jsx)(C.b,{className:"menu-btn-icon"})}),d&&Object(v.jsxs)("ul",{className:Object(i.a)("navbar-nav  flex-row align-items-center",d&&"expanded"),children:[r?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item me-3",children:Object(v.jsx)(u.b,{to:"/create-post",className:"cta nav-link btn btn-primary px-2",children:"Create post"})}),Object(v.jsx)("li",{className:"nav-item me-3",children:Object(v.jsxs)(u.b,{to:"/profile",className:"nav-link p-2 profile-link",children:[Object(v.jsx)("img",{src:"https://avatars.dicebear.com/api/male/john.svg?mood[]=happy",alt:""}),Object(v.jsx)("span",{children:x?x.split(" ")[0]:"Loading"})]})}),Object(v.jsx)("li",{className:"nav-item me-3",role:"button",onClick:function(){return e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/user/logout");case 3:n=e.sent,c=n.data,e.t0=c.success,e.next=!0===e.t0?8:!1===e.t0?12:15;break;case 8:return t({type:m}),t({type:h}),t({type:S,payload:c.message}),e.abrupt("break",16);case 12:return t({type:T,payload:c.message}),t({type:m}),e.abrupt("break",16);case 15:return e.abrupt("return");case 16:e.next=22;break;case 18:e.prev=18,e.t1=e.catch(0),t({type:T,message:"Something went wrong!"}),t({type:m});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}())},children:Object(v.jsx)("button",{className:"nav-link btn btn-link  px-2",children:"Logout"})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item me-3",children:Object(v.jsx)(u.b,{to:"/login",className:"nav-link btn btn-link px-2",children:"Login"})}),Object(v.jsx)("li",{className:"nav-item me-3",children:Object(v.jsx)(u.b,{to:"/register",className:"cta nav-link btn btn-primary  px-2",children:"Register"})})]}),Object(v.jsx)("li",{className:"nav-item  dark-mode-switch",onClick:function(){return e({type:f})},children:n?Object(v.jsx)(l.b,{className:"icon"}):Object(v.jsx)(l.a,{className:"icon"})})]})]})})}var x=n(5),L=n(76),g=n(8),N=["component"];function U(e){var t=e.component,n=Object(L.a)(e,N),c=Object(O.c)((function(e){return e.common})).isUserLoggedIn;return Object(v.jsx)(g.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){return c?Object(v.jsx)(t,Object(x.a)({},e)):Object(v.jsx)(g.a,{to:"/login"})}}))}n(119);var F=n(26),I=n(11),y=n(52),D=n.n(y),k=n(49),P=n(71),H=r.a.lazy((function(){return n.e(19).then(n.bind(null,366))})),G=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4),n.e(10)]).then(n.bind(null,171))})),w=r.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,371))})),z=r.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,367))})),B=r.a.lazy((function(){return Promise.all([n.e(0),n.e(2),n.e(8),n.e(13)]).then(n.bind(null,368))})),K=r.a.lazy((function(){return Promise.all([n.e(2),n.e(3),n.e(11)]).then(n.bind(null,369))}));var M=function(){var e=Object(F.d)(),t=Object(O.b)(),n=Object(O.c)((function(e){return e.common})).dark,r=Object(O.c)((function(e){return e.alert})),a=r.type,s=r.message,l=function(){t({type:I.CLEAR_ALERT})},b=Object(c.useState)((function(){return Boolean(Number(D.a.get("isUserLoggedIn")))})),d=Object(o.a)(b,2),j=d[0];return d[1],Object(c.useEffect)((function(){return t(j?{type:I.AUTHENTICATED}:{type:I.NOT_AUTHENTICATED})}),[j]),Object(c.useEffect)((function(){switch(a){case I.SUCCESS:e.success(s,{onClose:l});break;case I.ERROR:e.error(s,{onClose:l});break;case I.INFO:e.info(s,{onClose:l})}}),[a,s]),Object(v.jsx)(u.a,{children:Object(v.jsxs)("div",{className:Object(i.a)("app",n?"app_dark":"app_light"),children:[Object(v.jsx)(A,{}),Object(v.jsx)(c.Suspense,{fallback:Object(v.jsx)(k.a,{}),children:Object(v.jsxs)(g.d,{children:[Object(v.jsx)(g.b,{path:"/",exact:!0,component:H}),Object(v.jsx)(g.b,{path:"/post/:id",component:G}),Object(v.jsx)(g.b,{path:"/register",component:w}),Object(v.jsx)(g.b,{path:"/login",component:z}),Object(v.jsx)(U,{path:"/create-post",component:B}),Object(v.jsx)(U,{path:"/profile",component:K}),Object(v.jsx)(g.b,{path:"*",component:P.default})]})})]})})},W=n(25),Q=n(78),J=n(77),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:null,message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.ERROR:return Object(x.a)(Object(x.a)({},e),{},{type:I.ERROR,message:t.payload});case I.INFO:return Object(x.a)(Object(x.a)({},e),{},{type:I.INFO,message:t.payload});case I.SUCCESS:return Object(x.a)(Object(x.a)({},e),{},{type:I.SUCCESS,message:t.payload});case I.CLEAR_ALERT:return{type:null,message:null};default:return e}},q=n(11),X=q.TOGGLE_DARK_MODE,Y=q.AUTHENTICATED,Z=q.NOT_AUTHENTICATED,$=q.LOADING_ON,ee=q.LOADING_OFF,te=q.LOGOUT,ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dark:!1,isUserLoggedIn:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(x.a)(Object(x.a)({},e),{},{dark:!e.dark});case $:return Object(x.a)(Object(x.a)({},e),{},{loading:!0});case ee:return Object(x.a)(Object(x.a)({},e),{},{loading:!1});case Y:return Object(x.a)(Object(x.a)({},e),{},{isUserLoggedIn:!0});case Z:case te:return Object(x.a)(Object(x.a)({},e),{},{isUserLoggedIn:!1});default:return e}},ce=n(44),re=n(11),ae=re.FETCH_POST_SUCCESS,se=re.FETCH_POST_FAILURE,oe=re.CLEAR_ALL,ie=re.FETCH_A_POST_SUCCESS,ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetchedPosts:[],userPosts:[],visitedPosts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{fetchedPosts:[],profilePosts:[],userPosts:[],visitedPosts:[]};case ae:return Object(x.a)(Object(x.a)({},e),{},{fetchedPosts:Object(ce.a)(t.payload)});case se:return e;case ie:return Object(x.a)(Object(x.a)({},e),{},{visitedPosts:[].concat(Object(ce.a)(e.visitedPosts),[t.payload])});default:return e}},le=n(11),Oe=le.FETCH_USER_INFO_SUCCESS,be=(le.FETCH_USER_INFO_FAILURE,le.CLEAR_ALL),de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{};case Oe:return Object(x.a)(Object(x.a)({},e),{},{user:t.payload});default:return e}},je=Object(W.combineReducers)({common:ne,alert:V,post:ue,user:de}),Ee=[Q.a],pe=Object(W.createStore)(je,Object(J.composeWithDevTools)(W.applyMiddleware.apply(void 0,Ee))),_e=n(79),fe="production"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NODE_ENV;p.a.defaults.baseURL=fe?"https://abhishekram404-blog-simple.herokuapp.com/api/":"http://localhost:4000/api/",p.a.defaults.withCredentials=!0;var me=new R.QueryClient;s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(R.QueryClientProvider,{client:me,children:Object(v.jsx)(O.a,{store:pe,children:Object(v.jsx)(F.a,{transition:F.c.FADE,position:F.b.BOTTOM_LEFT,template:_e.a,timeout:5e3,offset:"30px",children:Object(v.jsx)(M,{})})})})}),document.getElementById("root"))},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(22),r=(n(1),n(14)),a=(n(120),n(4));function s(){var e=Object(r.c)((function(e){return e.common})).dark;return Object(a.jsx)("div",{className:Object(c.a)("loader",e?"loader-dark":"loader-light")})}},71:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));n(1);var c=n(8),r=n(4);function a(){var e=Object(c.g)();return Object(r.jsx)("div",{className:"error-page",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("h1",{children:"Error 404 !"}),Object(r.jsx)("h4",{children:"The page that you requested was not found. "}),Object(r.jsx)("button",{className:"btn btn-primary mt-3",onClick:function(){return e.goBack()},children:"Go to previous page"})]})})}},91:function(e,t,n){},93:function(e,t,n){}},[[121,6,7]]]);
//# sourceMappingURL=main.3688f67d.chunk.js.map