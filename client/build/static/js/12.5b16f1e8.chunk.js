(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[12],{129:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},154:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var r=a(50),s=a(28),n=a(45),c=a.n(n),o=a(22),i=a(1),l=a(14),u=(a(154),a(151)),m=a(152),d=a(23),b=a.n(d),j=a(11),f=a(8),p=a(133),h=a(127),x=function(){return h.a.Date.now()},O=/\s/;var g=function(e){for(var t=e.length;t--&&O.test(e.charAt(t)););return t},v=/^\s+/;var N=function(e){return e?e.slice(0,g(e)+1).replace(v,""):e},w=a(140),y=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,q=/^0o[0-7]+$/i,P=parseInt;var S=function(e){if("number"==typeof e)return e;if(Object(w.a)(e))return NaN;if(Object(p.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(p.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=N(e);var a=k.test(e);return a||q.test(e)?P(e.slice(2),a?2:8):y.test(e)?NaN:+e},U=Math.max,E=Math.min;var T=function(e,t,a){var r,s,n,c,o,i,l=0,u=!1,m=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var a=r,n=s;return r=s=void 0,l=t,c=e.apply(n,a)}function j(e){return l=e,o=setTimeout(h,t),u?b(e):c}function f(e){var a=e-i;return void 0===i||a>=t||a<0||m&&e-l>=n}function h(){var e=x();if(f(e))return O(e);o=setTimeout(h,function(e){var a=t-(e-i);return m?E(a,n-(e-l)):a}(e))}function O(e){return o=void 0,d&&r?b(e):(r=s=void 0,c)}function g(){var e=x(),a=f(e);if(r=arguments,s=this,i=e,a){if(void 0===o)return j(i);if(m)return clearTimeout(o),o=setTimeout(h,t),b(i)}return void 0===o&&(o=setTimeout(h,t)),c}return t=S(t)||0,Object(p.a)(a)&&(u=!!a.leading,n=(m="maxWait"in a)?U(S(a.maxWait)||0,t):n,d="trailing"in a?!!a.trailing:d),g.cancel=function(){void 0!==o&&clearTimeout(o),l=0,r=i=s=o=void 0},g.flush=function(){return void 0===o?c:O(x())},g},R=a(27),_=a(4);function F(){var e=Object(l.b)(),t=Object(i.useState)(!1),a=Object(s.a)(t,2),n=a[0],d=a[1],p=Object(l.c)((function(e){return e.common})),h=p.dark,x=p.isUserLoggedIn,O=Object(i.useState)(void 0),g=Object(s.a)(O,2),v=g[0],N=g[1],w=Object(f.g)(),y=m.c({name:m.e().min(3,"Name must be at least 3 characters long.").max(60,"Name too long!").required("Name is required."),username:m.e().min(3,"Username too short.").max(32,"Username too long.").matches(/^(?=[a-z0-9_]{3,20}$)(?!.*[_]{2})[^_].*[^_]$/,"Username must only contain lowercase letters(a-z), numbers(0-9), and underscore, and must not contain more than one trailing underscore or underscore  at the end.  ").required("Username is required."),email:m.e().email("Invalid email").required("Email is required."),password:m.e().min(6,"Password too short.").max(256,"Password too long.").required("Password is required."),password2:m.e().oneOf([m.d("password")],"Both passwords must match.")}),k=Object(R.useMutation)(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/user/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(t){var a=t.data;return d(!1),console.log(a),e({type:j.SUCCESS,payload:a.message}),w.push("/login")},onError:function(t){return d(!1),e({type:j.ERROR,payload:t.response.data.message})}}),q=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,k.mutate(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=T(function(){var e=Object(r.a)(c.a.mark((function e(t,a){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/user/checkUsernameAvailability?username="+t.target.value);case 3:r=e.sent,s=r.data,a({username:s.message}),N(s.success),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),a({username:e.t0.response.data.message}),N(e.t0.response.data.success);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),800);return x?Object(_.jsx)(f.a,{to:"/"}):Object(_.jsx)("div",{className:Object(o.a)("register py-4 px-1 p-md-4",h?"register_dark":"register_light"),children:Object(_.jsx)("div",{className:"container",children:Object(_.jsx)(u.d,{initialValues:{name:"",username:"",email:"",password:"",password2:""},validationSchema:y,onSubmit:q,children:function(e,t){var a;return Object(_.jsxs)(u.c,{className:Object(o.a)("card p-4",n&&"disabled"),children:[Object(_.jsx)("h2",{className:"text-center",children:"Register"}),Object(_.jsxs)("div",{className:"mb-3",children:[Object(_.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Name ",Object(_.jsx)("span",{className:"text-danger",children:"*"})]}),Object(_.jsx)(u.b,{type:"text",className:"form-control shadow-none",required:!0,name:"name"}),Object(_.jsx)("small",{className:"error-message text-danger",children:Object(_.jsx)(u.a,{name:"name"})})]}),Object(_.jsxs)("div",{className:"mb-3",children:[Object(_.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Username ",Object(_.jsx)("span",{className:"text-danger",children:"*"})]}),Object(_.jsx)(u.b,{type:"text",className:"form-control shadow-none",required:!0,name:"username",onKeyUp:function(t){P(t,e.setStatus)}}),Object(_.jsx)("small",{className:"error-message text-danger d-block",children:Object(_.jsx)(u.a,{name:"username"})}),Object(_.jsx)("small",{className:Object(o.a)("error-message d-block",v?"text-success":"text-danger"),children:(null===(a=e.status)||void 0===a?void 0:a.username)&&e.status.username})]}),Object(_.jsxs)("div",{className:"mb-3",children:[Object(_.jsxs)("label",{htmlFor:"email",className:"form-label",children:["Email ",Object(_.jsx)("span",{className:"text-danger",children:"*"})]}),Object(_.jsx)(u.b,{type:"email",className:"form-control shadow-none",required:!0,name:"email"}),Object(_.jsx)("small",{className:"error-message text-danger",children:Object(_.jsx)(u.a,{name:"email"})})]}),Object(_.jsxs)("div",{className:"mb-3",children:[Object(_.jsxs)("label",{htmlFor:"password",className:"form-label",children:["Password ",Object(_.jsx)("span",{className:"text-danger",children:"*"})]}),Object(_.jsx)(u.b,{type:"password",name:"password",className:"form-control shadow-none",required:!0}),Object(_.jsx)("small",{className:"error-message text-danger",children:Object(_.jsx)(u.a,{name:"password"})})]}),Object(_.jsxs)("div",{className:"mb-3",children:[Object(_.jsxs)("label",{htmlFor:"password2",className:"form-label",children:["Confirm Password ",Object(_.jsx)("span",{className:"text-danger",children:"*"})]}),Object(_.jsx)(u.b,{type:"password",name:"password2",className:"form-control shadow-none",required:!0}),Object(_.jsx)("small",{className:"error-message text-danger",children:Object(_.jsx)(u.a,{name:"password2"})})]}),Object(_.jsx)("button",{type:"submit",className:"submit-btn btn btn-primary",children:n?"Registering":"Register"})]})}})})})}}}]);
//# sourceMappingURL=12.5b16f1e8.chunk.js.map