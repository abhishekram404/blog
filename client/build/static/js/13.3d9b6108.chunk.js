(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[13],{124:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return y}));var r=n(50),a=n(46),c=n.n(a),s=(n(53),n(33).default),u=n(10),o=u.FETCH_POST_SUCCESS,i=u.FETCH_POST_FAILURE,p=u.INFO,l=u.FETCH_PROFILE_POST_SUCCESS,d=u.FETCH_PROFILE_POST_FAILURE,f=u.FETCH_A_POST_SUCCESS,h=(u.FETCH_A_POST_FAILURE,u.ERROR),b=u.UPDATE_POST_VIA_SOCKET,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(r.a)(c.a.mark((function t(n){var r,a,u,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get("/post/fetchHomepagePosts?skip="+e);case 2:return r=t.sent,a=r.data,t.next=6,a;case 6:u=t.sent,l=u.success,d=u.details,t.t0=l,t.next=!0===t.t0?12:!1===t.t0?13:14;break;case 12:return t.abrupt("return",n({type:o,payload:d}));case 13:return t.abrupt("return",n({type:i}));case 14:return t.abrupt("return",n({type:p,payload:"Something went wrong while fetching the posts."}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){var t=e.skip,n=e.profile;return function(){var e=Object(r.a)(c.a.mark((function e(r){var a,u,o,i,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("/post/fetchProfilePosts",{params:{skip:t,profile:n}});case 2:return a=e.sent,u=a.data,e.next=6,u;case 6:o=e.sent,i=o.success,f=o.details,e.t0=i,e.next=!0===e.t0?12:!1===e.t0?13:14;break;case 12:return e.abrupt("return",r({type:l,payload:f}));case 13:return e.abrupt("return",r({type:d}));case 14:return e.abrupt("return",r({type:p,payload:"Something went wrong while fetching the posts."}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.get("/post/fetch?id=".concat(e));case 3:r=t.sent,a=r.data,t.t0=a.success,t.next=!0===t.t0?8:!1===t.t0?9:10;break;case 8:return t.abrupt("return",n({type:f,payload:a.details}));case 9:return t.abrupt("return",n({type:i,payload:a.details}));case 10:return t.abrupt("return",n({type:h,payload:"Something went wrong while fetching the post."}));case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(0),n({type:h,payload:"Something went wrong while fetching the post."});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.post("/post/like",{postId:e});case 2:r=t.sent,r.data;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return{type:b,payload:e}}},215:function(e,t,n){},376:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),c=(n(215),n(27)),s=(n(33),n(16)),u=n(51),o=n(124),i=n(50),p=n(46),l=n.n(p),d=n(10),f=n(33).default,h=n(53),b=n(2),O=a.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(22)]).then(n.bind(null,165))})),j=a.a.lazy((function(){return Promise.all([n.e(1),n.e(4),n.e(7),n.e(23)]).then(n.bind(null,208))}));function m(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.common})),n=t.dark,a=t.isUserLoggedIn,p=Object(s.c)((function(e){return e.post})).fetchedPosts,m=Object(s.c)((function(e){return e.user})).user;return Object(r.useEffect)((function(){e(Object(o.b)(p.length)),e(function(){var e=Object(i.a)(l.a.mark((function e(t){var n,r,a,c,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("/user/fetchUserInfo");case 2:return n=e.sent,r=n.data,e.next=6,r;case 6:a=e.sent,c=a.success,s=a.message,u=a.details,e.t0=c,e.next=!0===e.t0?13:!1===e.t0?14:15;break;case 13:return e.abrupt("return",t({type:d.FETCH_USER_INFO_SUCCESS,payload:u}));case 14:return e.abrupt("return",t({type:d.FETCH_USER_INFO_FAILURE}));case 15:return e.abrupt("return",t({type:d.INFO,payload:s}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){h.a.on("post-like",(function(t){e(Object(o.e)(t))}))})),Object(b.jsx)("div",{className:Object(c.a)("homepage px-1 px-md-4 py-4",n?"homepage_dark":"homepage_light"),children:Object(b.jsx)("div",{className:"container  mx-auto",children:Object(b.jsxs)("div",{className:"row g-5",children:[Object(b.jsxs)("div",{className:"col-12 feed col-md-9",children:[Object(b.jsx)("h2",{className:"page-title",children:"Feed"}),Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(u.a,{}),children:p&&p.length>0?p.map((function(e){return Object(b.jsx)(O,{title:e.title,tags:e.tags,likes:e.likes.length,comments:e.comments.length,category:e.category,author:e.author,id:e._id,isAlreadyLiked:m&&e.likes.includes(m._id)},e._id)})):Object(b.jsx)("h4",{children:"No posts"})})]}),a&&Object(b.jsxs)("div",{className:"col-md-3 sidebar-section p-3 d-none d-md-block",children:["Quick links",Object(b.jsx)("hr",{className:"mt-2 mb-3"}),Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(u.a,{}),children:Object(b.jsx)(j,{})})]})]})})})}}}]);
//# sourceMappingURL=13.3d9b6108.chunk.js.map