{"version":3,"sources":["redux/actions/postActions.js","components/Profile.js"],"names":["axios","require","default","FETCH_POST_SUCCESS","FETCH_POST_FAILURE","INFO","FETCH_PROFILE_POST_SUCCESS","FETCH_PROFILE_POST_FAILURE","FETCH_A_POST_SUCCESS","ERROR","FETCH_A_POST_FAILURE","UPDATE_POST_VIA_SOCKET","fetch_posts","skip","dispatch","a","get","data","success","details","type","payload","fetch_profile_post","profile","params","fetch_a_post","postId","like_post","post","update_post","EditProfile","React","lazy","FeedItem","Error404","Posts","Drafts","Saved","Followers","Following","HomeSidebar","Profile","useDispatch","dark","useSelector","state","common","user","profilePosts","url","useRouteMatch","useEffect","length","username","className","clsx","path","exact","fallback","src","alt","name","bio","to","followers","following","address","joined","moment","startOf","fromNow","format","map","title","content","likes","comments","category","author","_id"],"mappings":"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","file":"static/js/16.28736ed1.chunk.js","sourcesContent":["import Socket from \"utils/Socket\";\n\nconst { default: axios } = require(\"axios\");\nconst {\n  FETCH_POST_SUCCESS,\n  FETCH_POST_FAILURE,\n  INFO,\n  FETCH_PROFILE_POST_SUCCESS,\n  FETCH_PROFILE_POST_FAILURE,\n  FETCH_A_POST_SUCCESS,\n  FETCH_A_POST_FAILURE,\n  ERROR,\n  UPDATE_POST_VIA_SOCKET,\n} = require(\"redux/constants\");\n\nexport const fetch_posts = (skip = 0) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(\"/post/fetchHomepagePosts?skip=\" + skip);\n\n    const { success, details } = await data;\n\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n\nexport const fetch_profile_post = ({ skip, profile }) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(`/post/fetchProfilePosts`, {\n      params: {\n        skip,\n        profile,\n      },\n    });\n    const { success, details } = await data;\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_PROFILE_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_PROFILE_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n\nexport const fetch_a_post = (postId) => {\n  return async (dispatch) => {\n    try {\n      const { data } = await axios.get(`/post/fetch?id=${postId}`);\n      switch (data.success) {\n        case true:\n          return dispatch({\n            type: FETCH_A_POST_SUCCESS,\n            payload: data.details,\n          });\n        case false:\n          return dispatch({\n            type: FETCH_POST_FAILURE,\n            payload: data.details,\n          });\n        default:\n          return dispatch({\n            type: ERROR,\n            payload: \"Something went wrong while fetching the post.\",\n          });\n      }\n    } catch (error) {\n      dispatch({\n        type: ERROR,\n        payload: \"Something went wrong while fetching the post.\",\n      });\n    }\n  };\n};\n\nexport const like_post = (postId) => {\n  return async (dispatch) => {\n    const { data } = await axios.post(\"/post/like\", {\n      postId,\n    });\n  };\n};\n\nexport const update_post = (details) => {\n  return {\n    type: UPDATE_POST_VIA_SOCKET,\n    payload: details,\n  };\n};\n","import React, { Suspense, useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { FiUsers } from \"react-icons/fi\";\nimport { IoLocationOutline } from \"react-icons/io5\";\nimport \"styles/profile.scss\";\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { Switch, Route, Link, useRouteMatch } from \"react-router-dom\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\nimport { fetch_profile_post } from \"redux/actions/postActions\";\n\nconst EditProfile = React.lazy(() => import(\"./EditProfile\"));\nconst FeedItem = React.lazy(() => import(\"./FeedItem\"));\nconst Error404 = React.lazy(() => import(\"./Error404\"));\nconst Posts = React.lazy(() => import(\"./Posts\"));\nconst Drafts = React.lazy(() => import(\"./Drafts\"));\nconst Saved = React.lazy(() => import(\"./Saved\"));\nconst Followers = React.lazy(() => import(\"./Followers\"));\nconst Following = React.lazy(() => import(\"./Following\"));\nconst HomeSidebar = React.lazy(() => import(\"./HomeSidebar\"));\nexport default function Profile() {\n  const dispatch = useDispatch();\n  const { dark } = useSelector((state) => state.common);\n  const { user } = useSelector((state) => state.user);\n  const { profilePosts } = useSelector((state) => state.post);\n  const { url } = useRouteMatch();\n  useEffect(() => {\n    dispatch(\n      fetch_profile_post({\n        skip: profilePosts.length,\n        profile: user.username,\n      })\n    );\n  }, []);\n  return (\n    <Switch>\n      <div\n        className={clsx(\n          \"profile py-4 px-1 p-md-4\",\n          dark ? \"profile_dark\" : \"profile_light\"\n        )}\n      >\n        <div className=\"container mx-auto\">\n          <div className=\"row g-5 justify-content-between \">\n            <div className=\"col-12 main-section col-md-9\">\n              <Route path={`${url}/`} exact>\n                <Suspense fallback={<Loading />}>\n                  <div className=\"profile-section  p-3\">\n                    <div className=\"avatar-section\">\n                      <img\n                        src=\"https://avatars.dicebear.com/api/male/john.svg?mood[]=happy\"\n                        alt=\"\"\n                      />\n                    </div>\n                    <br />\n                    <div className=\"details-section\">\n                      <h3>{user.name ? user.name : \"No name\"}</h3>\n                      <div className=\"username\">\n                        {user.username ? `@${user.username}` : \"No username\"}\n                      </div>\n                      <div className=\"bio\">\n                        {user.bio ? (\n                          user.bio\n                        ) : (\n                          <Link to=\"/edit\" className=\"btn-link\">\n                            Add bio\n                          </Link>\n                        )}\n                      </div>\n                      <div className=\"connections\">\n                        <FiUsers className=\"icon\" /> &nbsp;\n                        <b>{user.followers ? user.followers.length : 0}</b>{\" \"}\n                        &nbsp; followers &nbsp; &bull; &nbsp;\n                        <b>{user.following ? user.following.length : 0}</b>\n                        &nbsp; following\n                      </div>\n                      <div className=\"address\">\n                        <IoLocationOutline className=\"icon\" />\n                        {user.address ? (\n                          `Lives in ${user.address}`\n                        ) : (\n                          <Link to={`${url}/edit`} className=\"btn-link\">\n                            Add address\n                          </Link>\n                        )}\n                      </div>\n                      {user?.joined ? (\n                        <div className=\"joined\">\n                          <AiOutlineStar className=\"icon\" /> Joined &nbsp;\n                          {moment(user.joined).startOf(\"min\").fromNow()}&nbsp; (\n                          {moment(user.joined).format(\"ll\")})\n                        </div>\n                      ) : null}\n                      <Link\n                        to={`${url}/edit`}\n                        className=\"edit-profile-btn btn btn-sm btn-light px-4 d-inline\"\n                      >\n                        Edit profile\n                      </Link>\n                    </div>\n                  </div>\n                  <div className=\" profile-feed-section  p-3\">\n                    <h4>My posts</h4>\n                    <Suspense fallback={<Loading />}>\n                      {profilePosts && profilePosts.length > 0 ? (\n                        profilePosts.map((post) => {\n                          return (\n                            <FeedItem\n                              title={post.title}\n                              content={post.content}\n                              likes={post.likes.length}\n                              comments={post.comments.length}\n                              category={post.category}\n                              author={post.author}\n                              key={post._id}\n                            />\n                          );\n                        })\n                      ) : (\n                        <h4>No posts </h4>\n                      )}\n                    </Suspense>\n                  </div>\n                </Suspense>\n              </Route>\n              <Route path={`${url}/edit`}>\n                <Suspense fallback={<Loading />}>\n                  <EditProfile />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/posts`}>\n                <Suspense fallback={<Loading />}>\n                  <Posts />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/drafts`}>\n                <Suspense fallback={<Loading />}>\n                  <Drafts />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/saved`}>\n                <Suspense fallback={<Loading />}>\n                  <Saved />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/followers`}>\n                <Suspense fallback={<Loading />}>\n                  <Followers />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/following`}>\n                <Suspense fallback={<Loading />}>\n                  <Following />\n                </Suspense>\n              </Route>\n            </div>\n            <div className=\"sidebar-section col-md-3 p-3 d-none d-md-block\">\n              Quick links\n              <hr className=\"mt-2 mb-3\" />\n              <Suspense fallback={<Loading />}>\n                <HomeSidebar />\n              </Suspense>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Route path={`${url}/*`}>\n        <Suspense fallback={<Loading />}>\n          <Error404 />\n        </Suspense>\n      </Route>\n    </Switch>\n  );\n}\n"],"sourceRoot":""}