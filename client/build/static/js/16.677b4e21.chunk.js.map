{"version":3,"sources":["components/DraftItem.js"],"names":["DraftItem","title","id","refetchDrafts","dark","useSelector","state","common","dispatch","useDispatch","deleteDraftMutation","useMutation","postId","axios","delete","onSuccess","data","type","SUCCESS","payload","message","onError","error","console","log","publishMutation","put","ERROR","className","clsx","onClick","mutate"],"mappings":"+FAAA,2HAOe,SAASA,EAAT,GAAkD,IAA7BC,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,GAAIC,EAAiB,EAAjBA,cACrCC,EAASC,aAAY,SAACC,GAAD,OAAWA,EAAMC,UAAtCH,KACFI,EAAWC,cAEXC,EAAsBC,uBAC1B,SAACC,GAAD,OAAYC,IAAMC,OAAN,8BAAoCF,MAChD,CACEG,UAAW,YAAe,IAAZC,EAAW,EAAXA,KACZR,EAAS,CACPS,KAAMC,UACNC,QAASH,EAAKI,UAEhBjB,KAEFkB,QAAS,SAACC,GAAD,OAAWC,QAAQC,IAAIF,MAQ9BG,EAAkBd,uBACtB,SAACC,GAAD,OAAYC,IAAMa,IAAN,oCAAuCd,MACnD,CACEG,UAAW,YAAe,IAAZC,EAAW,EAAXA,KACZO,QAAQC,IAAIR,GACZR,EAAS,CAAES,KAAMC,UAASC,QAASH,EAAKI,UACxCjB,KAEFkB,QAAS,SAACC,GACRC,QAAQC,IAAIF,GACZd,EAAS,CAAES,KAAMU,QAAOR,QAAS,oCASvC,OACE,sBACES,UAAWC,YACT,0DACAzB,EAAO,kBAAoB,oBAH/B,UAME,qBAAKwB,UAAU,oBAAf,SACE,6BAAK3B,MAEP,sBAAK2B,UAAU,4BAAf,UACE,wBAAQA,UAAU,wCAAlB,kBACA,wBACEA,UAAU,yCACVE,QAAS,kBArCIlB,EAqCcV,OApCjCQ,EAAoBqB,OAAOnB,GADT,IAACA,GAmCf,oBAMA,wBACEgB,UAAU,0CACVE,QAAS,kBAxBKlB,EAwBcV,OAvBlCuB,EAAgBM,OAAOnB,GADJ,IAACA,GAsBhB,6B","file":"static/js/16.677b4e21.chunk.js","sourcesContent":["import axios from \"axios\";\nimport clsx from \"clsx\";\nimport React from \"react\";\nimport { useMutation } from \"react-query\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ERROR, SUCCESS } from \"redux/constants\";\nimport \"styles/draftItem.scss\";\nexport default function DraftItem({ title, id, refetchDrafts }) {\n  const { dark } = useSelector((state) => state.common);\n  const dispatch = useDispatch();\n\n  const deleteDraftMutation = useMutation(\n    (postId) => axios.delete(`/post/delete?postId=${postId}`),\n    {\n      onSuccess: ({ data }) => {\n        dispatch({\n          type: SUCCESS,\n          payload: data.message,\n        });\n        refetchDrafts();\n      },\n      onError: (error) => console.log(error),\n    }\n  );\n\n  const deleteDraft = (postId) => {\n    deleteDraftMutation.mutate(postId);\n  };\n\n  const publishMutation = useMutation(\n    (postId) => axios.put(`/post/publishDraft?postId=${postId}`),\n    {\n      onSuccess: ({ data }) => {\n        console.log(data);\n        dispatch({ type: SUCCESS, payload: data.message });\n        refetchDrafts();\n      },\n      onError: (error) => {\n        console.log(error);\n        dispatch({ type: ERROR, payload: \"Sorry! Something went wrong.\" });\n      },\n    }\n  );\n\n  const publishDraft = (postId) => {\n    publishMutation.mutate(postId);\n  };\n\n  return (\n    <div\n      className={clsx(\n        \"draft-item mb-3 row card align-items-center flex-column\",\n        dark ? \"draft-item-dark\" : \"draft-item-light\"\n      )}\n    >\n      <div className=\"col title-row p-3\">\n        <h4>{title}</h4>\n      </div>\n      <div className=\"col buttons-row px-3 py-2\">\n        <button className=\"btn btn-light btn-sm me-2 shadow-none\">Edit</button>\n        <button\n          className=\"btn btn-danger btn-sm me-2 shadow-none\"\n          onClick={() => deleteDraft(id)}\n        >\n          Delete\n        </button>\n        <button\n          className=\"btn btn-primary btn-sm me-2 shadow-none\"\n          onClick={() => publishDraft(id)}\n        >\n          Publish\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}