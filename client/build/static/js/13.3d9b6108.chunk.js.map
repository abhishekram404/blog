{"version":3,"sources":["redux/actions/postActions.js","redux/actions/userActions.js","components/Homepage.js"],"names":["axios","require","default","FETCH_POST_SUCCESS","FETCH_POST_FAILURE","INFO","FETCH_PROFILE_POST_SUCCESS","FETCH_PROFILE_POST_FAILURE","FETCH_A_POST_SUCCESS","ERROR","FETCH_A_POST_FAILURE","UPDATE_POST_VIA_SOCKET","fetch_posts","skip","dispatch","a","get","data","success","details","type","payload","fetch_profile_post","profile","params","fetch_a_post","postId","like_post","post","update_post","FeedItem","React","lazy","HomeSidebar","Homepage","useDispatch","useSelector","state","common","dark","isUserLoggedIn","fetchedPosts","user","useEffect","length","message","FETCH_USER_INFO_SUCCESS","FETCH_USER_INFO_FAILURE","Socket","on","postDetails","className","clsx","fallback","Loading","map","title","tags","likes","comments","category","author","id","_id","isAlreadyLiked","includes"],"mappings":"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","file":"static/js/13.3d9b6108.chunk.js","sourcesContent":["import Socket from \"utils/Socket\";\n\nconst { default: axios } = require(\"axios\");\nconst {\n  FETCH_POST_SUCCESS,\n  FETCH_POST_FAILURE,\n  INFO,\n  FETCH_PROFILE_POST_SUCCESS,\n  FETCH_PROFILE_POST_FAILURE,\n  FETCH_A_POST_SUCCESS,\n  FETCH_A_POST_FAILURE,\n  ERROR,\n  UPDATE_POST_VIA_SOCKET,\n} = require(\"redux/constants\");\n\nexport const fetch_posts = (skip = 0) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(\"/post/fetchHomepagePosts?skip=\" + skip);\n\n    const { success, details } = await data;\n\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n\nexport const fetch_profile_post = ({ skip, profile }) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(`/post/fetchProfilePosts`, {\n      params: {\n        skip,\n        profile,\n      },\n    });\n    const { success, details } = await data;\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_PROFILE_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_PROFILE_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n\nexport const fetch_a_post = (postId) => {\n  return async (dispatch) => {\n    try {\n      const { data } = await axios.get(`/post/fetch?id=${postId}`);\n      switch (data.success) {\n        case true:\n          return dispatch({\n            type: FETCH_A_POST_SUCCESS,\n            payload: data.details,\n          });\n        case false:\n          return dispatch({\n            type: FETCH_POST_FAILURE,\n            payload: data.details,\n          });\n        default:\n          return dispatch({\n            type: ERROR,\n            payload: \"Something went wrong while fetching the post.\",\n          });\n      }\n    } catch (error) {\n      dispatch({\n        type: ERROR,\n        payload: \"Something went wrong while fetching the post.\",\n      });\n    }\n  };\n};\n\nexport const like_post = (postId) => {\n  return async (dispatch) => {\n    const { data } = await axios.post(\"/post/like\", {\n      postId,\n    });\n  };\n};\n\nexport const update_post = (details) => {\n  return {\n    type: UPDATE_POST_VIA_SOCKET,\n    payload: details,\n  };\n};\n","import {\n  FETCH_USER_INFO_FAILURE,\n  FETCH_USER_INFO_SUCCESS,\n  INFO,\n} from \"redux/constants\";\n\nconst { default: axios } = require(\"axios\");\n\nexport const fetch_user_info = () => {\n  return async (dispatch) => {\n    const { data } = await axios.get(\"/user/fetchUserInfo\");\n    const { success, message, details } = await data;\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_USER_INFO_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_USER_INFO_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: message,\n        });\n    }\n  };\n};\n","import React, { Suspense, useEffect } from \"react\";\nimport \"styles/Homepage.scss\";\nimport clsx from \"clsx\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Loading from \"./Loading\";\nimport { fetch_posts, update_post } from \"redux/actions/postActions\";\nimport { fetch_user_info } from \"redux/actions/userActions\";\nimport Socket from \"utils/Socket\";\nconst FeedItem = React.lazy(() => import(\"./FeedItem\"));\nconst HomeSidebar = React.lazy(() => import(\"./HomeSidebar\"));\nexport default function Homepage() {\n  const dispatch = useDispatch();\n  const { dark, isUserLoggedIn } = useSelector((state) => state.common);\n  const { fetchedPosts } = useSelector((state) => state.post);\n  const { user } = useSelector((state) => state.user);\n  useEffect(() => {\n    dispatch(fetch_posts(fetchedPosts.length));\n    dispatch(fetch_user_info());\n  }, []);\n\n  useEffect(() => {\n    Socket.on(\"post-like\", (postDetails) => {\n      dispatch(update_post(postDetails));\n    });\n  });\n\n  return (\n    <div\n      className={clsx(\n        \"homepage px-1 px-md-4 py-4\",\n        dark ? \"homepage_dark\" : \"homepage_light\"\n      )}\n    >\n      <div className=\"container  mx-auto\">\n        <div className=\"row g-5\">\n          <div className=\"col-12 feed col-md-9\">\n            <h2 className=\"page-title\">Feed</h2>\n            <Suspense fallback={<Loading />}>\n              {fetchedPosts && fetchedPosts.length > 0 ? (\n                fetchedPosts.map((post) => (\n                  <FeedItem\n                    title={post.title}\n                    tags={post.tags}\n                    likes={post.likes.length}\n                    comments={post.comments.length}\n                    category={post.category}\n                    author={post.author}\n                    key={post._id}\n                    id={post._id}\n                    isAlreadyLiked={user && post.likes.includes(user._id)}\n                  />\n                ))\n              ) : (\n                <h4>No posts</h4>\n              )}\n            </Suspense>\n          </div>\n\n          {/* Sidebar is commented for now */}\n          {isUserLoggedIn && (\n            <div className=\"col-md-3 sidebar-section p-3 d-none d-md-block\">\n              Quick links\n              <hr className=\"mt-2 mb-3\" />\n              <Suspense fallback={<Loading />}>\n                <HomeSidebar />\n              </Suspense>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}