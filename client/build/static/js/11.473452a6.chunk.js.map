{"version":3,"sources":["../node_modules/webpack/buildin/module.js","components/Profile.js"],"names":["module","exports","webpackPolyfill","deprecate","paths","children","Object","defineProperty","enumerable","get","l","i","EditProfile","React","lazy","FeedItem","Error404","Posts","Drafts","HomeSidebar","Profile","dispatch","useDispatch","dark","useSelector","state","common","ownId","Cookies","url","useRouteMatch","useQuery","axios","params","profile","profilePostsLoading","isLoading","profilePosts","data","profilePostsError","isError","userInfoLoading","user","type","ERROR","payload","className","clsx","path","exact","fallback","src","alt","details","name","username","bio","to","address","joined","moment","startOf","fromNow","format","length","map","post","title","category","author","tags","id","_id"],"mappings":"gFAAAA,EAAOC,QAAU,SAASD,GAoBzB,OAnBKA,EAAOE,kBACXF,EAAOG,UAAY,aACnBH,EAAOI,MAAQ,GAEVJ,EAAOK,WAAUL,EAAOK,SAAW,IACxCC,OAAOC,eAAeP,EAAQ,SAAU,CACvCQ,YAAY,EACZC,IAAK,WACJ,OAAOT,EAAOU,KAGhBJ,OAAOC,eAAeP,EAAQ,KAAM,CACnCQ,YAAY,EACZC,IAAK,WACJ,OAAOT,EAAOW,KAGhBX,EAAOE,gBAAkB,GAEnBF,I,uDCpBR,gNAaMY,EAAcC,IAAMC,MAAK,kBAAM,wDAC/BC,EAAWF,IAAMC,MAAK,kBAAM,iCAC5BE,EAAWH,IAAMC,MAAK,kBAAM,2CAC5BG,EAAQJ,IAAMC,MAAK,kBAAM,kCACzBI,EAASL,IAAMC,MAAK,kBAAM,kCAC1BK,EAAcN,IAAMC,MAAK,kBAAM,kCACtB,SAASM,IAAW,IAAD,IAC1BC,EAAWC,cACTC,EAASC,aAAY,SAACC,GAAD,OAAWA,EAAMC,UAAtCH,KACFI,EAAQC,IAAQnB,IAAI,UAClBoB,EAAQC,cAARD,IACR,EAIIE,mBAAS,gBAAgB,kBAC3BC,IAAMvB,IAAN,0BAAqC,CACnCwB,OAAQ,CAENC,QAASP,QAPFQ,EADb,EACEC,UACMC,EAFR,EAEEC,KACSC,EAHX,EAGEC,QAUF,EAIIT,mBAAS,YAAY,kBAAMC,IAAMvB,IAAI,0BAH5BgC,EADb,EACEL,UAEMM,GAHR,EAEEF,QAFF,EAGEF,MAUF,OAPIC,GACFlB,EAAS,CACPsB,KAAMC,QACNC,QAAS,mCAITJ,EACK,cAAC,IAAD,IAIP,eAAC,IAAD,WACE,qBACEK,UAAWC,YACT,2BACAxB,EAAO,eAAiB,iBAH5B,SAME,qBAAKuB,UAAU,oBAAf,SACE,sBAAKA,UAAU,mCAAf,UACE,sBAAKA,UAAU,+BAAf,UACE,cAAC,IAAD,CAAOE,KAAI,UAAKnB,EAAL,KAAaoB,OAAK,EAA7B,SACE,eAAC,WAAD,CAAUC,SAAU,cAAC,IAAD,IAApB,UACE,sBAAKJ,UAAU,uBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,qBACEK,IAAI,8DACJC,IAAI,OAGR,uBACA,sBAAKN,UAAU,kBAAf,UACE,uCAAKJ,EAAKJ,KAAKe,QAAQC,YAAvB,QAA+B,YAC/B,sBAAKR,UAAU,WAAf,cACIJ,EAAKJ,KAAKe,QAAQE,YAEtB,qBAAKT,UAAU,MAAf,SACGJ,EAAKJ,KAAKe,QAAQG,IACjBd,EAAKJ,KAAKe,QAAQG,IAElB,cAAC,IAAD,CAAMC,GAAE,UAAK5B,EAAL,SAAiBiB,UAAU,WAAnC,uBAMJ,sBAAKA,UAAU,UAAf,UACE,cAAC,IAAD,CAAmBA,UAAU,SAC5BJ,EAAKJ,KAAKe,QAAQK,QAAlB,mBACahB,EAAKJ,KAAKe,QAAQK,SAE9B,cAAC,IAAD,CAAMD,GAAE,UAAK5B,EAAL,SAAiBiB,UAAU,WAAnC,4BAKH,UAAAJ,EAAKJ,KAAKe,eAAV,SAAmBM,OAClB,sBAAKb,UAAU,SAAf,UACE,cAAC,IAAD,CAAeA,UAAU,SAD3B,eAEGc,IAAOlB,EAAKJ,KAAKe,QAAQM,QACvBE,QAAQ,OACRC,UAJL,SAMGF,IAAOlB,EAAKJ,KAAKe,QAAQM,QAAQI,OAAO,MAN3C,OAQE,KACJ,cAAC,IAAD,CACEN,GAAE,UAAK5B,EAAL,SACFiB,UAAU,sDAFZ,gCAQJ,sBAAKA,UAAU,6BAAf,UACE,0CACCX,GAAuB,cAAC,IAAD,IACxB,cAAC,WAAD,CAAUe,SAAU,cAAC,IAAD,IAApB,UACIf,GACFE,EAAaC,KAAKe,QAAQW,OAAS,EACjC3B,EAAaC,KAAKe,QAAQY,KAAI,SAACC,GAC7B,OACE,cAACnD,EAAD,CACEoD,MAAOD,EAAKC,MACZC,SAAUF,EAAKE,SACfC,OAAQH,EAAKG,OAEbC,KAAMJ,EAAKI,KACXC,GAAIL,EAAKM,KAFJN,EAAKM,QAOhB,qDAMV,cAAC,IAAD,CAAOxB,KAAI,UAAKnB,EAAL,SAAX,SACE,cAAC,WAAD,CAAUqB,SAAU,cAAC,IAAD,IAApB,SACE,cAACtC,EAAD,QAGJ,cAAC,IAAD,CAAOoC,KAAI,UAAKnB,EAAL,UAAX,SACE,cAAC,WAAD,CAAUqB,SAAU,cAAC,IAAD,IAApB,SACE,cAACjC,EAAD,QAGJ,cAAC,IAAD,CAAO+B,KAAI,UAAKnB,EAAL,WAAX,SACE,cAAC,WAAD,CAAUqB,SAAU,cAAC,IAAD,IAApB,SACE,cAAChC,EAAD,WAIN,sBAAK4B,UAAU,iDAAf,wBAEE,oBAAIA,UAAU,cACd,cAAC,WAAD,CAAUI,SAAU,cAAC,IAAD,IAApB,SACE,cAAC/B,EAAD,gBAMV,cAAC,IAAD,CAAO6B,KAAI,UAAKnB,EAAL,MAAX,SACE,cAAC,WAAD,CAAUqB,SAAU,cAAC,IAAD,IAApB,SACE,cAAClC,EAAD","file":"static/js/11.473452a6.chunk.js","sourcesContent":["module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import React, { Suspense, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { IoLocationOutline } from \"react-icons/io5\";\nimport \"styles/profile.scss\";\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { Switch, Route, Link, useRouteMatch } from \"react-router-dom\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\nimport { useQuery } from \"react-query\";\nimport axios from \"axios\";\nimport { ERROR } from \"redux/constants\";\nimport Cookies from \"js-cookie\";\nconst EditProfile = React.lazy(() => import(\"./EditProfile\"));\nconst FeedItem = React.lazy(() => import(\"./FeedItem\"));\nconst Error404 = React.lazy(() => import(\"./Error404\"));\nconst Posts = React.lazy(() => import(\"./Posts\"));\nconst Drafts = React.lazy(() => import(\"./Drafts\"));\nconst HomeSidebar = React.lazy(() => import(\"./HomeSidebar\"));\nexport default function Profile() {\n  const dispatch = useDispatch();\n  const { dark } = useSelector((state) => state.common);\n  const ownId = Cookies.get(\"userId\");\n  const { url } = useRouteMatch();\n  const {\n    isLoading: profilePostsLoading,\n    data: profilePosts,\n    isError: profilePostsError,\n  } = useQuery(\"profilePosts\", () =>\n    axios.get(`/post/fetchProfilePosts`, {\n      params: {\n        // skip: profilePosts.length,\n        profile: ownId,\n      },\n    })\n  );\n\n  const {\n    isLoading: userInfoLoading,\n    isError: userInfoError,\n    data: user,\n  } = useQuery(\"userData\", () => axios.get(\"/user/fetchUserInfo\"));\n\n  if (profilePostsError) {\n    dispatch({\n      type: ERROR,\n      payload: \"Failed to fetch profile posts.\",\n    });\n  }\n\n  if (userInfoLoading) {\n    return <Loading />;\n  }\n\n  return (\n    <Switch>\n      <div\n        className={clsx(\n          \"profile py-4 px-1 p-md-4\",\n          dark ? \"profile_dark\" : \"profile_light\"\n        )}\n      >\n        <div className=\"container mx-auto\">\n          <div className=\"row g-5 justify-content-between \">\n            <div className=\"col-12 main-section col-md-9\">\n              <Route path={`${url}/`} exact>\n                <Suspense fallback={<Loading />}>\n                  <div className=\"profile-section  p-3\">\n                    <div className=\"avatar-section\">\n                      <img\n                        src=\"https://avatars.dicebear.com/api/male/john.svg?mood[]=happy\"\n                        alt=\"\"\n                      />\n                    </div>\n                    <br />\n                    <div className=\"details-section\">\n                      <h3>{user.data.details.name ?? \"No name\"}</h3>\n                      <div className=\"username\">\n                        @{user.data.details.username}\n                      </div>\n                      <div className=\"bio\">\n                        {user.data.details.bio ? (\n                          user.data.details.bio\n                        ) : (\n                          <Link to={`${url}/edit`} className=\"btn-link\">\n                            Add bio\n                          </Link>\n                        )}\n                      </div>\n\n                      <div className=\"address\">\n                        <IoLocationOutline className=\"icon\" />\n                        {user.data.details.address ? (\n                          `Lives in ${user.data.details.address}`\n                        ) : (\n                          <Link to={`${url}/edit`} className=\"btn-link\">\n                            Add address\n                          </Link>\n                        )}\n                      </div>\n                      {user.data.details?.joined ? (\n                        <div className=\"joined\">\n                          <AiOutlineStar className=\"icon\" /> Joined &nbsp;\n                          {moment(user.data.details.joined)\n                            .startOf(\"min\")\n                            .fromNow()}\n                          &nbsp; (\n                          {moment(user.data.details.joined).format(\"ll\")})\n                        </div>\n                      ) : null}\n                      <Link\n                        to={`${url}/edit`}\n                        className=\"edit-profile-btn btn btn-sm btn-light px-4 d-inline\"\n                      >\n                        Edit profile\n                      </Link>\n                    </div>\n                  </div>\n                  <div className=\" profile-feed-section  p-3\">\n                    <h4>My posts</h4>\n                    {profilePostsLoading && <Loading />}\n                    <Suspense fallback={<Loading />}>\n                      {!profilePostsLoading &&\n                      profilePosts.data.details.length > 0 ? (\n                        profilePosts.data.details.map((post) => {\n                          return (\n                            <FeedItem\n                              title={post.title}\n                              category={post.category}\n                              author={post.author}\n                              key={post._id}\n                              tags={post.tags}\n                              id={post._id}\n                            />\n                          );\n                        })\n                      ) : (\n                        <h4>No posts </h4>\n                      )}\n                    </Suspense>\n                  </div>\n                </Suspense>\n              </Route>\n              <Route path={`${url}/edit`}>\n                <Suspense fallback={<Loading />}>\n                  <EditProfile />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/posts`}>\n                <Suspense fallback={<Loading />}>\n                  <Posts />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/drafts`}>\n                <Suspense fallback={<Loading />}>\n                  <Drafts />\n                </Suspense>\n              </Route>\n            </div>\n            <div className=\"sidebar-section col-md-3 p-3 d-none d-md-block\">\n              Quick links\n              <hr className=\"mt-2 mb-3\" />\n              <Suspense fallback={<Loading />}>\n                <HomeSidebar />\n              </Suspense>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Route path={`${url}/*`}>\n        <Suspense fallback={<Loading />}>\n          <Error404 />\n        </Suspense>\n      </Route>\n    </Switch>\n  );\n}\n"],"sourceRoot":""}