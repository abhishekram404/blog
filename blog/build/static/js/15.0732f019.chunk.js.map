{"version":3,"sources":["redux/actions/postActions.js","components/Profile.js"],"names":["axios","require","default","FETCH_POST_SUCCESS","FETCH_POST_FAILURE","INFO","FETCH_PROFILE_POST_SUCCESS","FETCH_PROFILE_POST_FAILURE","fetch_posts","skip","dispatch","a","get","data","success","details","console","log","type","payload","fetch_profile_post","profile","params","EditProfile","React","lazy","FeedItem","Error404","Posts","Drafts","Saved","Followers","Following","HomeSidebar","Profile","useDispatch","dark","useSelector","state","common","user","profilePosts","post","url","useRouteMatch","useEffect","length","username","className","clsx","path","exact","fallback","src","alt","name","bio","to","followers","following","address","joined","moment","startOf","fromNow","format","map","title","content","likes","comments","category","author","_id"],"mappings":"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","file":"static/js/15.0732f019.chunk.js","sourcesContent":["const { default: axios } = require(\"axios\");\nconst {\n  FETCH_POST_SUCCESS,\n  FETCH_POST_FAILURE,\n  INFO,\n  FETCH_PROFILE_POST_SUCCESS,\n  FETCH_PROFILE_POST_FAILURE,\n} = require(\"redux/constants\");\n\nexport const fetch_posts = (skip = 0) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(\"/post/fetchHomepagePosts?skip=\" + skip);\n\n    const { success, details } = await data;\n\n    console.log(success, details);\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n\nexport const fetch_profile_post = ({ skip, profile }) => {\n  return async (dispatch) => {\n    const { data } = await axios.get(`/post/fetchProfilePosts`, {\n      params: {\n        skip,\n        profile,\n      },\n    });\n    const { success, details } = await data;\n    console.log(details);\n    switch (success) {\n      case true:\n        return dispatch({\n          type: FETCH_PROFILE_POST_SUCCESS,\n          payload: details,\n        });\n      case false:\n        return dispatch({\n          type: FETCH_PROFILE_POST_FAILURE,\n        });\n      default:\n        return dispatch({\n          type: INFO,\n          payload: \"Something went wrong while fetching the posts.\",\n        });\n    }\n  };\n};\n","import React, { Suspense, useEffect, useRef, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { FiUsers } from \"react-icons/fi\";\nimport { IoLocationOutline } from \"react-icons/io5\";\nimport \"styles/profile.scss\";\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { Switch, Route, Link, useRouteMatch } from \"react-router-dom\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\nimport { fetch_profile_post } from \"redux/actions/postActions\";\n\nconst EditProfile = React.lazy(() => import(\"./EditProfile\"));\nconst FeedItem = React.lazy(() => import(\"./FeedItem\"));\nconst Error404 = React.lazy(() => import(\"./Error404\"));\nconst Posts = React.lazy(() => import(\"./Posts\"));\nconst Drafts = React.lazy(() => import(\"./Drafts\"));\nconst Saved = React.lazy(() => import(\"./Saved\"));\nconst Followers = React.lazy(() => import(\"./Followers\"));\nconst Following = React.lazy(() => import(\"./Following\"));\nconst HomeSidebar = React.lazy(() => import(\"./HomeSidebar\"));\nexport default function Profile() {\n  const dispatch = useDispatch();\n  const { dark } = useSelector((state) => state.common);\n  const { user } = useSelector((state) => state.user);\n  const { profilePosts } = useSelector((state) => state.post);\n  const { url } = useRouteMatch();\n  useEffect(() => {\n    dispatch(\n      fetch_profile_post({\n        skip: profilePosts.length,\n        profile: user.username,\n      })\n    );\n    // setSkip(skip + 3);\n    // console.log(skip);\n  }, []);\n  return (\n    <Switch>\n      <div\n        className={clsx(\n          \"profile py-4 px-1 p-md-4\",\n          dark ? \"profile_dark\" : \"profile_light\"\n        )}\n      >\n        <div className=\"container mx-auto\">\n          <div className=\"row g-5 justify-content-between \">\n            <div className=\"col-12 main-section col-md-9\">\n              <Route path={`${url}/`} exact>\n                <Suspense fallback={<Loading />}>\n                  <div className=\"profile-section  p-3\">\n                    <div className=\"avatar-section\">\n                      <img\n                        src=\"https://avatars.dicebear.com/api/male/john.svg?mood[]=happy\"\n                        alt=\"\"\n                      />\n                    </div>\n                    <br />\n                    <div className=\"details-section\">\n                      <h3>{user.name ? user.name : \"No name\"}</h3>\n                      <div className=\"username\">\n                        {user.username ? `@${user.username}` : \"No username\"}\n                      </div>\n                      <div className=\"bio\">\n                        {user.bio ? (\n                          user.bio\n                        ) : (\n                          <Link to=\"/edit\" className=\"btn-link\">\n                            Add bio\n                          </Link>\n                        )}\n                      </div>\n                      <div className=\"connections\">\n                        <FiUsers className=\"icon\" /> &nbsp;\n                        <b>{user.followers ? user.followers.length : 0}</b>{\" \"}\n                        &nbsp; followers &nbsp; &bull; &nbsp;\n                        <b>{user.following ? user.following.length : 0}</b>\n                        &nbsp; following\n                      </div>\n                      <div className=\"address\">\n                        <IoLocationOutline className=\"icon\" />\n                        {user.address ? (\n                          `Lives in ${user.address}`\n                        ) : (\n                          <Link to={`${url}/edit`} className=\"btn-link\">\n                            Add address\n                          </Link>\n                        )}\n                      </div>\n                      {user?.joined ? (\n                        <div className=\"joined\">\n                          <AiOutlineStar className=\"icon\" /> Joined &nbsp;\n                          {moment(user.joined).startOf(\"min\").fromNow()}&nbsp; (\n                          {moment(user.joined).format(\"ll\")})\n                        </div>\n                      ) : null}\n                      <Link\n                        to={`${url}/edit`}\n                        className=\"edit-profile-btn btn btn-sm btn-light px-4 d-inline\"\n                      >\n                        Edit profile\n                      </Link>\n                    </div>\n                  </div>\n                  <div className=\" profile-feed-section  p-3\">\n                    <h4>My posts</h4>\n                    <Suspense fallback={<Loading />}>\n                      {profilePosts && profilePosts.length > 0 ? (\n                        profilePosts.map((post) => {\n                          return (\n                            <FeedItem\n                              title={post.title}\n                              content={post.content}\n                              likes={post.likes.length}\n                              comments={post.comments.length}\n                              category={post.category}\n                              author={post.author}\n                              key={post._id}\n                            />\n                          );\n                        })\n                      ) : (\n                        <h4>No posts </h4>\n                      )}\n                    </Suspense>\n                  </div>\n                </Suspense>\n              </Route>\n              <Route path={`${url}/edit`}>\n                <Suspense fallback={<Loading />}>\n                  <EditProfile />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/posts`}>\n                <Suspense fallback={<Loading />}>\n                  <Posts />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/drafts`}>\n                <Suspense fallback={<Loading />}>\n                  <Drafts />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/saved`}>\n                <Suspense fallback={<Loading />}>\n                  <Saved />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/followers`}>\n                <Suspense fallback={<Loading />}>\n                  <Followers />\n                </Suspense>\n              </Route>\n              <Route path={`${url}/following`}>\n                <Suspense fallback={<Loading />}>\n                  <Following />\n                </Suspense>\n              </Route>\n            </div>\n            <div className=\"sidebar-section col-md-3 p-3 d-none d-md-block\">\n              Quick links\n              <hr className=\"mt-2 mb-3\" />\n              <Suspense fallback={<Loading />}>\n                <HomeSidebar />\n              </Suspense>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Route path={`${url}/*`}>\n        <Suspense fallback={<Loading />}>\n          <Error404 />\n        </Suspense>\n      </Route>\n    </Switch>\n  );\n}\n"],"sourceRoot":""}